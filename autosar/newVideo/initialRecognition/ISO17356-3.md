
## 介绍



汽车应用的特点是具有严格的实时要求。因此，操作系统(0S)提供了必要的功能来支持事件驱动(event driven)的控制系统。

指定的操作系统服务是实现各厂商软件模块集成的基础。为了能够对单个控制单元的特定特性做出反应，而决定于它们的性能和对资源的最低消耗需求，主要的重点不是实现应用程序模块之间的100%兼容性，而是它们的直接可移植性。

由于操作系统旨在用于任何类型的控制单元，它支持在广泛的硬件上的时间关键(time critical)应用程序。高度的模块化和灵活配置的能力是使操作系统适合低端微处理器和复杂控制单元的先决条件。这些需求已经被“一致性类”定义(见 3.2)和特定于应用程序的适应的特定能力所支持。

对于时间紧迫的应用程序，系统对象的动态生成被丢弃了 。(**动态生成就是类似malloc又不确定性**)。相反，系统对象的生成被分配给系统生成阶段。操作系统内的错误查询可以在很大程度上避免，从而不会不必要地影响整个系统的速度。(**在实际应用中可以把一些没用的错误查询关掉,DET**)另一方面，定义了具有扩展错误查询的系统版本。它适用于测试阶段和时间要求较低的应用程序。即使在这个阶段，也确保了定义(**api**)的统一系统外观(**api是确定的，就是打开扩展错误查询和不打开扩展错误查询的代码是一样的，不需要重新写**)。

## 0.1.1标准接口
应用软件与操作系统之间的接口由系统服务(system service)定义。对于各种处理器家族上的操作系统的所有实现，接口是相同的。

系统服务指定为ISO/ANSI-C类语法(也就是说API是C定义的)，但是没有指定系统服务的实现语言。

## 0.1.2 可伸缩性
不同的一致性类(**不同的配置等级**)、各种调度机制和配置特性使操作系统适用于广泛的应用程序和硬件。该操作系统被设计为只需要最少的硬件资源(RAM、ROM、CPU 时间)，因此甚至可以在8 位微控制器上运行。

## 0.1.3 错误检查
OS提供了两个级别的错误检查，开发阶段的扩展状态和生产阶段的标准状态。

扩展状态允许对调用OS服务进行增强的合理性检查。由于附加的错误检查，它比标准版本需要更多的执行时间和内存空间。然而，在测试阶段可以发现许多错误。在消除了所有错误之后，可以使用标准版本重新编译系统。

## 0.1.4 应用程序移植
ISO 17356 的目标之一是支持应用软件的可移植性和可重用性。因此，应用程序软件和操作系统之间的接口由具有定义良好的功能的标准化系统服务定义。使用标准化的系统服务可以减少维护和移植应用程序软件的工作量和开发成本。

api例子：
![20250109190257](https://cdn.jsdelivr.net/gh/xiongGithub1/picGoUpload/image/20250109190257.png)

可移植性意味着能够将一个应用软件模块从一个 ECU 转移到另一个 ECU,而无需对应用程序内部进行更大的更改。操作系统的标准化接口(服务调用、类型定义和常量)支持源代码级别的可移植性。目标代码(obiect code)的交换不是 ISO 17356 规定的。

应用程序软件部署在操作系统上，与应用程序特定的IO系统接口是 parallel的，这些 IO接口在 IS0 17356 中没有标准化。应用软件模块可以有多个接口。有用于实时控制和资源管理的操作系统接口，但也有用于表示系统中完整功能的其他软件模块的接口，如果应用程序直接工作在微控制器上，至少也有用于硬件的接口。

![20250109190740](https://cdn.jsdelivr.net/gh/xiongGithub1/picGoUpload/image/20250109190740.png)

**注意:OSEK OS 允许应用程序通过 API 直接操作硬件，即图中IO system 部分。**
在将应用软件从一个 ECU 移植到另一个 ECU 的过程中，必须考虑软件开发过程的特点、ECU 的开发环境和硬件架构，例如:
--软件开发指导方针;
--文件管理系统;
--编译器的数据分配和栈使用;
--ECU 的内存结构(memory architecture);
--ECU 的时序行为(timing behaviour);
--不同的单片机专用接口，如端口、A/D 转换器、串行通信和看门狗定时器;
--API调用的设计
这意味着规范不足以完全描述实现。实现应该提供特定的文档。(**每家os实现时特殊需要提供自己的说明文档，就类似c语言大致规范是有的，不同的编译器细节有差异**)

## 0.1.5 移植的支持
认证过程确保了不同实现与规范的一致性。本标准第 14 条收集实现的具体细节，这些细节应被视为提高应用程序在不同实现之间的可移植性。这里只考虑应用程序的操作系统接口。(**没有考虑IO实现的移植**)

## 0.1.6车规级需求的特殊文持
对操作系统的特定要求在汽车控制单元软件开发中不断增加。以下特性满足可靠性、实时性和成本敏感性等需求:

--操作系统静态配置和扩展。用户静态地指定所需的任务、资源和服务的数量。
--操作系统规范支持能够在 ROM 上运行的实现，即代码可以从只读内存中执行。
--操作系统支持应用任务的可移植性。
--操作系统规范提供了一个可预测的(**就是对任务执行时间有预测性能计算出来的，最坏情况下的执行时间，比如刹车要求20ms必须响应**)和文档化的行为,使操作系统实现能够满足汽车实时需求。
--操作系统的规范允许实现可预测的性能参数。(**静态就是可预测的，动态就是不可预测的****)

## 0.2 本文档目标
下面的描述被认为是一个通用的描述，对于任何操作系统的实现都是强制性的。这涉及策略和功能的一般描述、调用的接口、参数的含义和声明以及可能的错误代码。

IS0 17356 的这一部分保留了一定的灵活性。一方面，该描述足够通用，适合未来的升级;另一方面，部分描述是显式指定并且是“具体实现相关”的。

任何实现都定义了所有“具体实现相关”的事项。实现支持的一致性类(**四种级别**)被精确地指出。并且特定于实现的问题被记录下来。

因为这种描述是强制性的,所以只在涉及一般系统策略时才进行定义。在所有其他方面,由系统实现决定对特定硬件类型的最佳适配。